<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Výběr Postavy - Cyberpunk RPG</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="character-creation-container">
        <h1>Vytvořte si svou postavu</h1>
        
        <!-- Výběr Třídy s Náhledem -->
        <div class="character-class-selection">
            <h2>Vyberte si třídu</h2>
            <button onclick="changeClass('previous')">&#8592;</button>
            <span id="class-name">Hacker</span>
            <button onclick="changeClass('next')">&#8594;</button>
        </div>
        
        <!-- Výběr Pohlaví -->
        <div class="character-gender-selection">
            <h2>Vyberte si pohlaví</h2>
            <button onclick="changeGender('previous')">&#8592;</button>
            <span id="gender-name">Muž</span>
            <button onclick="changeGender('next')">&#8594;</button>
        </div>

        <!-- Výběr Rasy -->
        <div class="character-race-selection">
            <h2>Vyberte si rasu</h2>
            <button onclick="changeRace('previous')">&#8592;</button>
            <span id="race-name">Člověk</span>
            <button onclick="changeRace('next')">&#8594;</button>
        </div>
        
        <!-- Výběr Jména Postavy -->
        <div class="character-name-selection">
            <h2>Zadejte jméno postavy</h2>
            <input type="text" id="character-name" placeholder="Jméno postavy">
        </div>
        
        <!-- Tlačítko Potvrdit -->
        <div class="character-confirm">
            <button onclick="confirmSelection()">Potvrdit postavu</button>
        </div>
    </div>

    <div class="profile-scene" id="profile-scene" style="display: none;">
        <h1>Profil Postavy</h1>
        <div class="character-info">
            <p><strong>Jméno:</strong> <span id="profile-name"></span></p>
            <p><strong>Třída:</strong> <span id="profile-class"></span></p>
            <p><strong>Rasa:</strong> <span id="profile-race"></span></p>
            <p><strong>Pohlaví:</strong> <span id="profile-gender"></span></p>
        </div>
        <div class="character-preview">
            <img id="profile-image" src="" alt="Character Image">
        </div>
        <div class="character-attributes" id="attributes-section">
            <h2>Atributy</h2>
            <p><strong>Síla:</strong> <span id="attribute-strength">5</span> <button onclick="increaseAttribute('strength')">+</button></p>
            <p><strong>Obratnost:</strong> <span id="attribute-agility">5</span> <button onclick="increaseAttribute('agility')">+</button></p>
            <p><strong>Odolnost:</strong> <span id="attribute-endurance">5</span> <button onclick="increaseAttribute('endurance')">+</button></p>
            <p><strong>Inteligence:</strong> <span id="attribute-intelligence">5</span> <button onclick="increaseAttribute('intelligence')">+</button></p>
            <p><strong>Charisma:</strong> <span id="attribute-charisma">5</span> <button onclick="increaseAttribute('charisma')">+</button></p>
            <p><strong>Technologie:</strong> <span id="attribute-technology">5</span> <button onclick="increaseAttribute('technology')">+</button></p>
            <p><strong>Kybernetika:</strong> <span id="attribute-cybernetics">5</span> <button onclick="increaseAttribute('cybernetics')">+</button></p>
            <p><strong>Hackerské schopnosti:</strong> <span id="attribute-hacking">5</span> <button onclick="increaseAttribute('hacking')">+</button></p>
            <p><strong>Reflexy:</strong> <span id="attribute-reflexes">5</span> <button onclick="increaseAttribute('reflexes')">+</button></p>
            <p><strong>Odolnost vůči stresu:</strong> <span id="attribute-stress-resistance">5</span> <button onclick="increaseAttribute('stressResistance')">+</button></p>
            <p><strong>Štěstí:</strong> <span id="attribute-luck">5</span> <button onclick="increaseAttribute('luck')">+</button></p>
            <p><strong>Technická Zručnost:</strong> <span id="attribute-tech-skill">5</span> <button onclick="increaseAttribute('techSkill')">+</button></p>
            <p><strong>Zdraví:</strong> <span id="attribute-health">100</span></p>
            <p><strong>Výdrž:</strong> <span id="attribute-stamina">50</span></p>
        </div>
        <div class="navigation-panel">
            <button onclick="window.location.href='profile.html';">Profil</button>
            <button onclick="navigate('tavern')">Hospoda</button>
            <button onclick="navigate('shop')">Obchod</button>
        </div>
    </div>

    <script>
        const classes = ['hacker', 'street_samurai'];
        const genders = ['male', 'female'];
        const races = ['human', 'cybermutant'];

        let currentClassIndex = 0;
        let currentGenderIndex = 0;
        let currentRaceIndex = 0;

        function updatePreview() {
            const selectedClass = classes[currentClassIndex];
            const selectedGender = genders[currentGenderIndex];
            const selectedRace = races[currentRaceIndex];

            let imageName;

            if (selectedRace === 'cybermutant') {
                if (selectedClass === 'street_samurai') {
                    imageName = `cybermutant_samurai_${selectedGender}.png`;
                } else {
                    imageName = `cybermutant_${selectedClass}_${selectedGender}.png`;
                }
            } else {
                imageName = `${selectedClass}_${selectedGender}.png`;
            }

            // Aktualizace textu výběru
            document.getElementById('class-name').innerText = selectedClass === 'hacker' ? 'Hacker' : 'Pouliční Samuraj';
            document.getElementById('gender-name').innerText = selectedGender === 'male' ? 'Muž' : 'Žena';
            document.getElementById('race-name').innerText = selectedRace === 'human' ? 'Člověk' : 'Kybermutant';
        }

        function changeClass(direction) {
            if (direction === 'next') {
                currentClassIndex = (currentClassIndex + 1) % classes.length;
            } else {
                currentClassIndex = (currentClassIndex - 1 + classes.length) % classes.length;
            }
            updatePreview();
        }

        function changeGender(direction) {
            if (direction === 'next') {
                currentGenderIndex = (currentGenderIndex + 1) % genders.length;
            } else {
                currentGenderIndex = (currentGenderIndex - 1 + genders.length) % genders.length;
            }
            updatePreview();
        }

        function changeRace(direction) {
            if (direction === 'next') {
                currentRaceIndex = (currentRaceIndex + 1) % races.length;
            } else {
                currentRaceIndex = (currentRaceIndex - 1 + races.length) % races.length;
            }
            updatePreview();
        }

        function confirmSelection() {
            const selectedClass = classes[currentClassIndex];
            const selectedRace = races[currentRaceIndex];
            const selectedGender = genders[currentGenderIndex];
            const characterName = document.getElementById('character-name').value;

            if (characterName.trim() === '') {
                alert('Prosím zadejte jméno postavy.');
                return;
            }

            // Uložení údajů o postavě do localStorage
            const characterData = {
                name: characterName,
                class: selectedClass,
                race: selectedRace,
                gender: selectedGender,
                attributes: {
                    strength: 5,
                    agility: 5,
                    endurance: 5,
                    intelligence: 5,
                    charisma: 5,
                    technology: 5,
                    cybernetics: 5,
                    hacking: 5,
                    reflexes: 5,
                    stressResistance: 5,
                    luck: 5,
                    techSkill: 5,
                    health: 100,
                    stamina: 50
                }
            };
            localStorage.setItem('characterData', JSON.stringify(characterData));

            // Zobrazení profilové scény
            document.querySelector('.character-creation-container').style.display = 'none';
            document.getElementById('profile-scene').style.display = 'block';

            // Zobrazení uložených údajů v profilu
            document.getElementById('profile-name').innerText = characterName;
            document.getElementById('profile-class').innerText = selectedClass === 'hacker' ? 'Hacker' : 'Pouliční Samuraj';
            document.getElementById('profile-race').innerText = selectedRace === 'human' ? 'Člověk' : 'Kybermutant';
            document.getElementById('profile-gender').innerText = selectedGender === 'male' ? 'Muž' : 'Žena';

            // Zobrazení obrázku postavy v profilu
            const profileImage = document.getElementById('profile-image');
            profileImage.src = `assets/characters/${selectedRace === 'cybermutant' ? 'cybermutant' : selectedClass}_${selectedGender}.png`;

            // Zobrazení atributů
            const attributes = characterData.attributes;
            document.getElementById('attribute-strength').innerText = attributes.strength;
            document.getElementById('attribute-agility').innerText = attributes.agility;
            document.getElementById('attribute-endurance').innerText = attributes.endurance;
            document.getElementById('attribute-intelligence').innerText = attributes.intelligence;
            document.getElementById('attribute-charisma').innerText = attributes.charisma;
            document.getElementById('attribute-technology').innerText = attributes.technology;
            document.getElementById('attribute-cybernetics').innerText = attributes.cybernetics;
            document.getElementById('attribute-hacking').innerText = attributes.hacking;
            document.getElementById('attribute-reflexes').innerText = attributes.reflexes;
            document.getElementById('attribute-stress-resistance').innerText = attributes.stressResistance;
            document.getElementById('attribute-luck').innerText = attributes.luck;
            document.getElementById('attribute-tech-skill').innerText = attributes.techSkill;
            document.getElementById('attribute-health').innerText = attributes.health;
            document.getElementById('attribute-stamina').innerText = attributes.stamina;
        }

        function loadCharacter() {
            const savedCharacter = localStorage.getItem('characterData');
            if (savedCharacter) {
                const characterData = JSON.parse(savedCharacter);

                // Nastavení uložených údajů
                document.getElementById('profile-name').innerText = characterData.name;
                document.getElementById('profile-class').innerText = characterData.class === 'hacker' ? 'Hacker' : 'Pouliční Samuraj';
                document.getElementById('profile-race').innerText = characterData.race === 'human' ? 'Člověk' : 'Kybermutant';
                document.getElementById('profile-gender').innerText = characterData.gender === 'male' ? 'Muž' : 'Žena';

                // Zobrazení obrázku postavy v profilu
                const profileImage = document.getElementById('profile-image');
                profileImage.src = `assets/characters/${characterData.race === 'cybermutant' ? 'cybermutant' : characterData.class}_${characterData.gender}.png`;

                // Zobrazení atributů
                const attributes = characterData.attributes;
                document.getElementById('attribute-strength').innerText = attributes.strength;
                document.getElementById('attribute-agility').innerText = attributes.agility;
                document.getElementById('attribute-endurance').innerText = attributes.endurance;
                document.getElementById('attribute-intelligence').innerText = attributes.intelligence;
                document.getElementById('attribute-charisma').innerText = attributes.charisma;
                document.getElementById('attribute-technology').innerText = attributes.technology;
                document.getElementById('attribute-cybernetics').innerText = attributes.cybernetics;
                document.getElementById('attribute-hacking').innerText = attributes.hacking;
                document.getElementById('attribute-reflexes').innerText = attributes.reflexes;
                document.getElementById('attribute-stress-resistance').innerText = attributes.stressResistance;
                document.getElementById('attribute-luck').innerText = attributes.luck;
                document.getElementById('attribute-tech-skill').innerText = attributes.techSkill;
                document.getElementById('attribute-health').innerText = attributes.health;
                document.getElementById('attribute-stamina').innerText = attributes.stamina;

                // Přeskočení tvorby postavy, pokud je uložená
                document.querySelector('.character-creation-container').style.display = 'none';
                document.getElementById('profile-scene').style.display = 'block';
            } else {
                // Inicializace náhledu při načtení stránky
                updatePreview();
            }
        }

        function increaseAttribute(attribute) {
            const savedCharacter = JSON.parse(localStorage.getItem('characterData'));
            savedCharacter.attributes[attribute] += 1;
            localStorage.setItem('characterData', JSON.stringify(savedCharacter));
            document.getElementById(`attribute-${attribute}`).innerText = savedCharacter.attributes[attribute];
        }

        function navigate(destination) {
            alert(`Navigace do: ${destination}`);
        }

        // Načtení uložené postavy při načtení stránky
        loadCharacter();
    </script>
</body>
</html>
